=== RUN   TestGophermart
=== RUN   TestGophermart/TestEndToEnd
=== RUN   TestGophermart/TestEndToEnd/register_accrual_mechanic
=== RUN   TestGophermart/TestEndToEnd/register_order_for_accrual
=== RUN   TestGophermart/TestEndToEnd/register_user
=== RUN   TestGophermart/TestEndToEnd/order_upload
=== RUN   TestGophermart/TestEndToEnd/await_order_processed
    gophermart_e2e_test.go:180: 
        	Error Trace:	C:\golang\yandex\go-loyalty-system\gophermart_e2e_test.go:180
        	            				C:\golang\yandex\go-loyalty-system\suite.go:91
        	Error:      	Received unexpected error:
        	            	Get "http://localhost:8080/api/user/orders": context deadline exceeded
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Ошибка при попытке сделать запрос на получение статуса расчета начисления в системе лояльности
    gophermart_e2e_test.go:181: 
        	Error Trace:	C:\golang\yandex\go-loyalty-system\gophermart_e2e_test.go:181
        	            				C:\golang\yandex\go-loyalty-system\suite.go:91
        	Error:      	[]int{200, 204} does not contain 0
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'GET http://localhost:8080/api/user/orders'
    gophermart_e2e_test.go:184: 
        	Error Trace:	C:\golang\yandex\go-loyalty-system\gophermart_e2e_test.go:184
        	            				C:\golang\yandex\go-loyalty-system\suite.go:91
        	Error:      	"" does not contain "application/json"
        	Test:       	TestGophermart/TestEndToEnd/await_order_processed
        	Messages:   	Заголовок ответа Content-Type содержит несоответствующее значение
    gophermart_e2e_test.go:190: Оригинальный запрос:
        
        GET /api/user/orders HTTP/1.1
        Host: localhost:8080
        Cookie: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiIiLCJleHAiOjE3Mzk2MzI4NjksImlkIjoiNTgiLCJsb2dpbiI6Imt2aHROSDEySjhtTiIsInN1YiI6IiIsInRva2VuIjoiMWVlNDc0NzYtNGEwNy00OWQ5LTljNjYtY2I3NTdhYmQ3MmE1In0.8GcGrjLTgP8oEHMWUkaNYcJcyJ0ULvj03xY-3J5Unog
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
    gophermart_e2e_test.go:166: Не удалось дождаться окончания расчета начисления
=== RUN   TestGophermart/TestEndToEnd/check_balance
    gophermart_e2e_test.go:231: 
        	Error Trace:	C:\golang\yandex\go-loyalty-system\gophermart_e2e_test.go:231
        	            				C:\golang\yandex\go-loyalty-system\suite.go:91
        	Error:      	Not equal: 
        	            	expected: main.userBalance{Current:729.98, Withdrawn:0}
        	            	actual  : main.userBalance{Current:10000, Withdrawn:0}
        	            	
        	            	Diff:
        	            	--- Expected
        	            	+++ Actual
        	            	@@ -1,3 +1,3 @@
        	            	 (main.userBalance) {
        	            	- Current: (float32) 729.98,
        	            	+ Current: (float32) 10000,
        	            	  Withdrawn: (float32) 0
        	Test:       	TestGophermart/TestEndToEnd/check_balance
        	Messages:   	Баланс пользователя не соответствует ожидаемому
    gophermart_e2e_test.go:235: Оригинальный запрос:
        
        GET /api/user/balance HTTP/1.1
        Host: localhost:8080
        Cookie: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiIiLCJleHAiOjE3Mzk2MzI4NjksImlkIjoiNTgiLCJsb2dpbiI6Imt2aHROSDEySjhtTiIsInN1YiI6IiIsInRva2VuIjoiMWVlNDc0NzYtNGEwNy00OWQ5LTljNjYtY2I3NTdhYmQ3MmE1In0.8GcGrjLTgP8oEHMWUkaNYcJcyJ0ULvj03xY-3J5Unog
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
=== RUN   TestGophermart/TestEndToEnd/withdraw_balance
    gophermart_e2e_test.go:260: 
        	Error Trace:	C:\golang\yandex\go-loyalty-system\gophermart_e2e_test.go:260
        	            				C:\golang\yandex\go-loyalty-system\suite.go:91
        	Error:      	Not equal: 
        	            	expected: 200
        	            	actual  : 500
        	Test:       	TestGophermart/TestEndToEnd/withdraw_balance
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'POST http://localhost:8080/api/user/balance/withdraw'
    gophermart_e2e_test.go:266: Оригинальный запрос:
        
        POST /api/user/balance/withdraw HTTP/1.1
        Host: localhost:8080
        Accept: application/json
        Content-Type: application/json
        Cookie: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiIiLCJleHAiOjE3Mzk2MzI4NjksImlkIjoiNTgiLCJsb2dpbiI6Imt2aHROSDEySjhtTiIsInN1YiI6IiIsInRva2VuIjoiMWVlNDc0NzYtNGEwNy00OWQ5LTljNjYtY2I3NTdhYmQ3MmE1In0.8GcGrjLTgP8oEHMWUkaNYcJcyJ0ULvj03xY-3J5Unog
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
        
        {
        			"order": "862001160145",
            		"sum": 406.10
        		}
        
=== RUN   TestGophermart/TestEndToEnd/recheck_balance
    gophermart_e2e_test.go:289: 
        	Error Trace:	C:\golang\yandex\go-loyalty-system\gophermart_e2e_test.go:289
        	            				C:\golang\yandex\go-loyalty-system\suite.go:91
        	Error:      	Max difference between 323.87503 and 10000 allowed is 0.01, but difference was -9676.124969482422
        	Test:       	TestGophermart/TestEndToEnd/recheck_balance
        	Messages:   	Баланс пользователя не соответствует ожидаемому
    gophermart_e2e_test.go:290: 
        	Error Trace:	C:\golang\yandex\go-loyalty-system\gophermart_e2e_test.go:290
        	            				C:\golang\yandex\go-loyalty-system\suite.go:91
        	Error:      	Max difference between 406.10495 and 0 allowed is 0.01, but difference was 406.1049499511719
        	Test:       	TestGophermart/TestEndToEnd/recheck_balance
        	Messages:   	Списанная сумма не соответствует ожидаемой
    gophermart_e2e_test.go:294: Оригинальный запрос:
        
        GET /api/user/balance HTTP/1.1
        Host: localhost:8080
        Cookie: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiIiLCJleHAiOjE3Mzk2MzI4NjksImlkIjoiNTgiLCJsb2dpbiI6Imt2aHROSDEySjhtTiIsInN1YiI6IiIsInRva2VuIjoiMWVlNDc0NzYtNGEwNy00OWQ5LTljNjYtY2I3NTdhYmQ3MmE1In0.8GcGrjLTgP8oEHMWUkaNYcJcyJ0ULvj03xY-3J5Unog
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
=== RUN   TestGophermart/TestEndToEnd/check_withdrawals
    gophermart_e2e_test.go:319: 
        	Error Trace:	C:\golang\yandex\go-loyalty-system\gophermart_e2e_test.go:319
        	            				C:\golang\yandex\go-loyalty-system\suite.go:91
        	Error:      	Should NOT be empty, but was []
        	Test:       	TestGophermart/TestEndToEnd/check_withdrawals
=== RUN   TestGophermart/TestUserAuth
=== RUN   TestGophermart/TestUserAuth/register_user
=== RUN   TestGophermart/TestUserAuth/login_user
=== RUN   TestGophermart/TestUserOrders
=== RUN   TestGophermart/TestUserOrders/unauthorized_order_upload
=== RUN   TestGophermart/TestUserOrders/unauthorized_orders_list
=== RUN   TestGophermart/TestUserOrders/register_user
=== RUN   TestGophermart/TestUserOrders/bad_order_upload
=== RUN   TestGophermart/TestUserOrders/order_upload
=== RUN   TestGophermart/TestUserOrders/duplicate_order_upload_same_user
=== RUN   TestGophermart/TestUserOrders/orders_list
=== RUN   TestGophermart/TestUserOrders/duplicate_order_upload_other_user
    gophermart_orders_test.go:236: 
        	Error Trace:	C:\golang\yandex\go-loyalty-system\gophermart_orders_test.go:236
        	            				C:\golang\yandex\go-loyalty-system\suite.go:91
        	Error:      	Not equal: 
        	            	expected: 409
        	            	actual  : 200
        	Test:       	TestGophermart/TestUserOrders/duplicate_order_upload_other_user
        	Messages:   	Несоответствие статус кода ответа ожидаемому в хендлере 'POST http://localhost:8080/api/user/orders'
    gophermart_orders_test.go:242: Оригинальный запрос:
        
        POST /api/user/orders HTTP/1.1
        Host: localhost:8080
        Content-Type: text/plain
        Cookie: token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3MiOiIiLCJleHAiOjE3Mzk2MzI4ODksImlkIjoiNjEiLCJsb2dpbiI6IldGeThndU5UVE9DMCIsInN1YiI6IiIsInRva2VuIjoiMWM0ZTg0ZmQtYjJlZS00ZWI1LWI5NWQtMzQ5YzE0NTNiMjYwIn0.YfY-CWI4gGsAasDJgDaYGDzwNn42Bk95flKBD1VFVk8
        User-Agent: go-resty/2.7.0 (https://github.com/go-resty/resty)
        
        
        104052275044408
        
=== NAME  TestGophermart
    gophermart_suite_test.go:105: останавливаем процесс gophermart
    gophermart_suite_test.go:122: Не удалось остановить процесс с помощью сигнала ОС: error sending signal to process: TerminateProcess: Access is denied.
    gophermart_suite_test.go:108: останавливаем процесс accrual
    gophermart_suite_test.go:122: Не удалось остановить процесс с помощью сигнала ОС: error sending signal to process: TerminateProcess: Access is denied.
--- FAIL: TestGophermart (20.42s)
    --- FAIL: TestGophermart/TestEndToEnd (20.09s)
        --- PASS: TestGophermart/TestEndToEnd/register_accrual_mechanic (0.01s)
        --- PASS: TestGophermart/TestEndToEnd/register_order_for_accrual (0.00s)
        --- PASS: TestGophermart/TestEndToEnd/register_user (0.01s)
        --- PASS: TestGophermart/TestEndToEnd/order_upload (0.01s)
        --- FAIL: TestGophermart/TestEndToEnd/await_order_processed (20.00s)
        --- FAIL: TestGophermart/TestEndToEnd/check_balance (0.00s)
        --- FAIL: TestGophermart/TestEndToEnd/withdraw_balance (0.05s)
        --- FAIL: TestGophermart/TestEndToEnd/recheck_balance (0.00s)
        --- FAIL: TestGophermart/TestEndToEnd/check_withdrawals (0.00s)
    --- PASS: TestGophermart/TestUserAuth (0.01s)
        --- PASS: TestGophermart/TestUserAuth/register_user (0.00s)
        --- PASS: TestGophermart/TestUserAuth/login_user (0.00s)
    --- FAIL: TestGophermart/TestUserOrders (0.01s)
        --- PASS: TestGophermart/TestUserOrders/unauthorized_order_upload (0.00s)
        --- PASS: TestGophermart/TestUserOrders/unauthorized_orders_list (0.00s)
        --- PASS: TestGophermart/TestUserOrders/register_user (0.00s)
        --- PASS: TestGophermart/TestUserOrders/bad_order_upload (0.00s)
        --- PASS: TestGophermart/TestUserOrders/order_upload (0.00s)
        --- PASS: TestGophermart/TestUserOrders/duplicate_order_upload_same_user (0.00s)
        --- PASS: TestGophermart/TestUserOrders/orders_list (0.00s)
        --- FAIL: TestGophermart/TestUserOrders/duplicate_order_upload_other_user (0.00s)
FAIL
